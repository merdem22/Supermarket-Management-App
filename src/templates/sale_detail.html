{% extends "base.html" %}
{% block content %}
  <h2>Sale #{{ sale.sale_id }}</h2>
  <p>Date: {{ sale.sale_date }}</p>
  <p>Customer: 
    <a href="{{ url_for('customers_bp.customer_detail', customer_id=sale.customer_id) }}">
      {{ sale.customer_first }} {{ sale.customer_last }}
    </a>
  </p>

  <h3>Items</h3>
  <table>
    <thead>
      <tr>
        <th>Product</th>
        <th>Unit Price</th>
        <th>Quantity</th>
        <th>Line Total</th>
      </tr>
    </thead>
    <tbody>
      {% for item in line_items %}
      <tr>
        <td>
          <a href="{{ url_for('products_bp.product_detail', product_id=item.product_id) }}">
            {{ item.product_name }}
          </a>
        </td>
        <td>{{ item.unit_price }}</td>
        <td>{{ item.quantity }}</td>
        <td>{{ item.unit_price * item.quantity }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <p>Subtotal: {{ subtotal }}</p>
  <p>Total (with discount): {{ total_with_discount }}</p>
{% endblock %}
